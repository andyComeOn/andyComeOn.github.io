<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  

  
  <title>我的点滴记录</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta property="og:type" content="website">
<meta property="og:title" content="我的点滴记录">
<meta property="og:url" content="http://example.com/page/4/index.html">
<meta property="og:site_name" content="我的点滴记录">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="Andy Zhang">
<meta name="twitter:card" content="summary">
  
    <link rel="alternate" href="/atom.xml" title="我的点滴记录" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.ico">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  
<link rel="stylesheet" href="/css/style.css">

<meta name="generator" content="Hexo 5.4.2"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">我的点滴记录</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
          <a class="main-nav-link" href="/tags">Tags</a>
        
          <a class="main-nav-link" href="/about">About</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://example.com"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main">
  
    <article id="post-ejs文档" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2021/01/04/ejs%E6%96%87%E6%A1%A3/" class="article-date">
  <time datetime="2021-01-04T08:33:08.000Z" itemprop="datePublished">2021-01-04</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2021/01/04/ejs%E6%96%87%E6%A1%A3/">ejs文档</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="三种标签">三种标签</h3>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;% code %&gt; // JavaScript 代码。</span><br><span class="line">&lt;%= code %&gt; // 显示替换过 HTML 特殊字符的内容。</span><br><span class="line">&lt;%- code %&gt; // 显示原始 HTML 内容。</span><br></pre></td></tr></table></figure>
<h3 id="文档">文档</h3>
<ul>
<li>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_34310785/article/details/85592235">nodejs express template (模版)的使用 (ejs + express)</a></p>
</li>
<li>
<p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/zhongweiv/tag/ejs/">ejs 系列</a></p>
</li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2021/01/04/ejs%E6%96%87%E6%A1%A3/" data-id="cmcro5lld002mqkk49b15gkcm" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Node-js/" rel="tag">Node.js</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-gitignore" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/12/31/gitignore/" class="article-date">
  <time datetime="2020-12-31T08:13:41.000Z" itemprop="datePublished">2020-12-31</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/12/31/gitignore/">gitignore</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="前言">前言</h3>
<p>针对不同语言的工程，其脚手架中的 .gitignore 已经做了部分的封装，项目在开始之前最好是编辑好此文件，避免后期麻烦！在我的 gitee 中的 files 仓库，有此模板文件！</p>
<h3 id="格式规范">格式规范</h3>
<p>1、所有空行或者以注释符号 ＃ 开头的行都会被 Git 忽略<br>
2、可以使用标准的 glob 模式匹配<br>
3、匹配模式最后跟斜杠(/)说明要忽略的是目录<br>
4、要忽略指定模式以外的文件或目录，可以在模式前加上感叹号(!)进行取反</p>
<h3 id="glob-模式">glob 模式</h3>
<p>所谓的 glob 模式是指 shell 所使用的简化了的正则表达式，匹配规则如下：</p>
<ul>
<li><code>*</code> 星号匹配零个或多个任意字符</li>
<li><code>[]</code> 匹配任何一个列在方括号中的字符，如[ab]匹配 a 或者匹配 b</li>
<li><code>?</code> 问号匹配一个任意字符</li>
<li><code>[n-m]</code> 匹配所有在这两个字符范围内的字符，如[0-9]表示匹配所有 0 到 9 的数字</li>
</ul>
<h3 id="示例">示例</h3>
<ul>
<li><code>logs/</code> 忽略当前路径下的 logs 目录，包含 logs 下的所有子目录和文件，注：并不局限于根目录下 logs</li>
<li><code>/logs.txt</code> 忽略根目录下的 logs.txt 文件</li>
<li><code>*.class</code> 忽略所有后缀为 .class 的文件</li>
<li><code>!/classes/a.class</code> 不忽略跟目录下 classes 目录下的 a.class 文件</li>
<li><code>tmp/*.txt</code> 只忽略 tmp 目录下的 .txt 文件</li>
<li><code>**/foo</code> 可以忽略/foo, a/foo, a/b/foo 等</li>
</ul>
<h3 id="疑问">疑问</h3>
<p>写 node_modules/ 与 node_modules 效果是一样。都是直接忽略了目录下的所有文件、目录。我 gitee 仓库中的 stream2 项目中的 .gitignore 有体现！</p>
<h3 id="问题">问题</h3>
<p>在我的 ddyg-crs 中 .gitignore 已添加 /dist/ 但修改 dist 下的文件，git 依然会记录，此时需执行 <code>git rm -r --cached .</code>，<code>git add .</code>，<code>git commit -m 'update.gitignore'</code> 即可</p>
<h3 id="参考">参考</h3>
<ul>
<li><a target="_blank" rel="noopener" href="https://www.jianshu.com/p/699ed86028c2">.gitignore</a></li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2020/12/31/gitignore/" data-id="cmcro5llf002qqkk4ahnk587g" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Git%E7%9B%B8%E5%85%B3/" rel="tag">Git相关</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-ts笔记" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/12/31/ts%E7%AC%94%E8%AE%B0/" class="article-date">
  <time datetime="2020-12-31T07:01:16.000Z" itemprop="datePublished">2020-12-31</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/12/31/ts%E7%AC%94%E8%AE%B0/">ts笔记</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="杂记">杂记</h3>
<ul>
<li>1、若自己搭建项目，执行 tsc --init，前提需：&gt; npm install -g typescript</li>
</ul>
<h3 id="例子">例子</h3>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 变量</span></span><br><span class="line"><span class="built_in">let</span> a: string = <span class="string">&#x27;hi&#x27;</span>;</span><br><span class="line"><span class="built_in">let</span> b:boolean = <span class="literal">true</span>;</span><br><span class="line"><span class="comment"># 函数</span></span><br><span class="line"><span class="keyword">function</span> <span class="built_in">sum</span>(a: number, b:number): number &#123;</span><br><span class="line">  <span class="built_in">return</span> a + b</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 使用字面量进行类型声明</span></span><br><span class="line"><span class="built_in">let</span> d: 10; // 只能是 d = 10，这样感觉也没有意义</span><br><span class="line"><span class="built_in">let</span> gender: <span class="string">&#x27;male&#x27;</span> | <span class="string">&#x27;female&#x27;</span>; // 这样使用场景不多，但很巧妙</span><br><span class="line"><span class="built_in">let</span> c: string | boolean; // 言外之意，c可赋值为<span class="string">&#x27;hello&#x27;</span>，也可赋值为 <span class="literal">true</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># any 不建议使用</span></span><br><span class="line"><span class="built_in">let</span> e:any; // 显式</span><br><span class="line"><span class="built_in">let</span> e; // 隐式</span><br><span class="line">e = 10;</span><br><span class="line">e = <span class="literal">true</span>;</span><br><span class="line">e = <span class="string">&#x27;hi&#x27;</span>;</span><br><span class="line">// any不好，如：<span class="built_in">let</span> f: string; f = e; 这样编辑器无红色警告，这说明any跟谁沾边恶心谁。这种情况下最好使用unknown</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># unknown</span></span><br><span class="line"><span class="built_in">let</span> e:unknown; // 隐式</span><br><span class="line">e = <span class="string">&#x27;hi&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">let</span> g:string;</span><br><span class="line">g = e;</span><br><span class="line">// 提示报错，虽然此时e是字符串hi，但是此时解析器看的是e的类型，unknown不能赋值给string，unknown实际上就是一个类型安全的any，不能直接赋值给其他变量，解决办法有2种方法如下：</span><br><span class="line"></span><br><span class="line">// 方法一</span><br><span class="line"><span class="keyword">if</span> (typeof e === <span class="string">&#x27;string&#x27;</span>) &#123;</span><br><span class="line">  g = e</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 方法二</span><br><span class="line">g = e as string</span><br><span class="line">g = &lt;string&gt; e</span><br><span class="line"></span><br><span class="line"><span class="comment"># +++++++++++++++++++++++++++</span></span><br><span class="line"><span class="comment"># 针对断言</span></span><br><span class="line">var foo = &lt;foo&gt;bar;</span><br><span class="line">// 这里断言bar变量是foo类型的。 因为TypeScript也使用尖括号来表示类型断言，在结合JSX的语法后将带来解析上的困难。因此，TypeScript在.tsx文件里禁用了使用尖括号的类型断言。所以我们使用 as 作为断言多一些</span><br><span class="line"></span><br><span class="line"><span class="comment"># +++++++++++++++++++++++++++</span></span><br><span class="line"><span class="comment"># void 针对的是函数没有返回值</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> fn():void&#123;</span><br><span class="line">  // <span class="built_in">return</span></span><br><span class="line">  // <span class="built_in">return</span> null</span><br><span class="line">  // <span class="built_in">return</span> undefined</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># never 是针对上面函数返回的 void 所言，是从来都不会返回，这种函数是用来提示报错的</span></span><br><span class="line"><span class="keyword">function</span> fn2():never&#123;</span><br><span class="line">  throw new Error(<span class="string">&#x27;err&#x27;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 声明对象类型，因为在js中一切皆为对象，所以下面的声明没有意义</span></span><br><span class="line"><span class="built_in">let</span> j: object</span><br><span class="line">j = &#123;&#125;;</span><br><span class="line">j = <span class="function"><span class="title">function</span></span> () &#123;&#125;;</span><br><span class="line"></span><br><span class="line">// 为此我们若对对象声明可以有如下写法：</span><br><span class="line">// 语法：&#123;属性：属性值,属性?：属性值&#125;</span><br><span class="line">// 在属性值后面加?,表示属性可选</span><br><span class="line"><span class="built_in">let</span> j:&#123;&#125;</span><br><span class="line">j=&#123;age:18&#125;</span><br><span class="line"><span class="built_in">let</span> k:&#123;name: string, age?number&#125;</span><br><span class="line">k=&#123;name: <span class="string">&#x27;bo&#x27;</span>,age:18&#125;</span><br><span class="line"></span><br><span class="line">// [propName: string]: any 表示任意的属性，都可</span><br><span class="line"><span class="built_in">let</span> m: &#123; name: string, [propName: string]: any &#125;</span><br><span class="line">m = &#123;name: <span class="string">&#x27;zb&#x27;</span>, age: 18, height: 180&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 函数</span></span><br><span class="line"><span class="built_in">let</span> f: (a: number, b: number) =&gt; number</span><br><span class="line">// 设置函数结构类型声明：</span><br><span class="line">//      语法：（形参：类型，形参：类型）=&gt; 返回值类型</span><br><span class="line"><span class="built_in">let</span> f: (a: number, b: number) =&gt; number</span><br><span class="line">f = (a, b): number =&gt; &#123;</span><br><span class="line">    <span class="built_in">return</span> a + b</span><br><span class="line">&#125;</span><br><span class="line">// 在m-sbc-supplier发现 @types/react/index.d.ts 这样写的的</span><br><span class="line"><span class="comment"># componentWillReceiveProps?(nextProps: Readonly&lt;P&gt;, nextContext: any): void;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 数组</span></span><br><span class="line">// 数组</span><br><span class="line"><span class="built_in">let</span> e: string[]</span><br><span class="line">e = [<span class="string">&#x27;1&#x27;</span>, <span class="string">&#x27;2&#x27;</span>]</span><br><span class="line"></span><br><span class="line"><span class="built_in">let</span> num: number[]</span><br><span class="line"></span><br><span class="line"><span class="comment"># 元组</span></span><br><span class="line">// 元组：就是固定长度的数组</span><br><span class="line"><span class="built_in">let</span> h: [string, number]</span><br><span class="line">h = [<span class="string">&#x27;hi&#x27;</span>, 2]</span><br></pre></td></tr></table></figure>
<h3 id="笔记-之前自己总结">笔记(之前自己总结)</h3>
<p>在 TypeScript 中，可以使用  null  和  undefined  来定义这两个原始数据类型：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">let u: undefined = undefined;</span><br><span class="line">let n: null = null;</span><br></pre></td></tr></table></figure>
<p>与   void   的区别是，undefined   和   null   是所有类型的子类型。也就是说   undefined   类型的变量，可以赋值给  number  类型的变量，如下：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">// 这样不会报错</span><br><span class="line"><span class="built_in">let</span> num: number = undefined;</span><br><span class="line"></span><br><span class="line">// 这样也不会报错</span><br><span class="line"><span class="built_in">let</span> u: undefined;</span><br><span class="line"><span class="built_in">let</span> num: number = u;</span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">interface DeprecatedLifecycle&lt;P, S&gt;</span><br><span class="line"></span><br><span class="line"><span class="built_in">declare</span> namespace cats &#123;</span><br><span class="line">  interface KittySettings &#123; &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="接口">接口</h3>
<p>写法如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2020/12/31/ts%E7%AC%94%E8%AE%B0/" data-id="cmcro5lmj0043qkk460igepbp" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/JS%E7%9B%B8%E5%85%B3/" rel="tag">JS相关</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-单车系统" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/12/26/%E5%8D%95%E8%BD%A6%E7%B3%BB%E7%BB%9F/" class="article-date">
  <time datetime="2020-12-26T08:13:21.000Z" itemprop="datePublished">2020-12-26</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/12/26/%E5%8D%95%E8%BD%A6%E7%B3%BB%E7%BB%9F/">单车系统</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="前言">前言</h3>
<p>20201207-20201209 三天</p>
<h3 id="笔记">笔记</h3>
<p>1、项目使用vue-cli@3.0搭建，src/server 是后端目录，src/views 是前端目录；前端 vue，后端 node，数据库 mysql；<br>
2、针对 mysql 首先 npm i mysql -S 中内地 hxzn 讲到 mysql 的连接池</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">const mysql = require(<span class="string">&quot;mysql&quot;</span>);</span><br><span class="line"><span class="comment"># 连接池</span></span><br><span class="line">const pool = mysql.createPool(&#123;</span><br><span class="line">  host: <span class="string">&quot;localhost&quot;</span>,</span><br><span class="line">  user: <span class="string">&quot;root&quot;</span>,</span><br><span class="line">  password: <span class="string">&quot;123456&quot;</span>,</span><br><span class="line">  database: <span class="string">&quot;my db&quot;</span>,</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment"># 传统写法</span></span><br><span class="line"><span class="comment"># const pool = mysql.createConnection(&#123;</span></span><br><span class="line"><span class="comment">#   host: &quot;localhost&quot;,</span></span><br><span class="line"><span class="comment">#   user: &quot;root&quot;,</span></span><br><span class="line"><span class="comment">#   password: &quot;123456&quot;,</span></span><br><span class="line"><span class="comment">#   database: &quot;my db&quot;,</span></span><br><span class="line"><span class="comment"># &#125;);</span></span><br><span class="line"><span class="comment"># pool.connect();</span></span><br><span class="line"><span class="comment"># pool.end();</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">const query = <span class="keyword">function</span> (sql, callback) &#123;</span><br><span class="line">  pool.getconnection((err, conn) =&gt; &#123;</span><br><span class="line">    if (err) &#123;</span><br><span class="line">      callback(err, null);</span><br><span class="line">    &#125; else &#123;</span><br><span class="line">      conn.query(sql, (err, result) =&gt; &#123;</span><br><span class="line">        conn.release();</span><br><span class="line">        callback(err, result);</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;;</span><br><span class="line">module.exports = query;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2020/12/26/%E5%8D%95%E8%BD%A6%E7%B3%BB%E7%BB%9F/" data-id="cmcro5ln6005rqkk49f75hchf" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Web%E6%9D%82%E9%9B%86/" rel="tag">Web杂集</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-vue-main-js的一些配置" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/12/26/vue-main-js%E7%9A%84%E4%B8%80%E4%BA%9B%E9%85%8D%E7%BD%AE/" class="article-date">
  <time datetime="2020-12-26T07:31:20.000Z" itemprop="datePublished">2020-12-26</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/12/26/vue-main-js%E7%9A%84%E4%B8%80%E4%BA%9B%E9%85%8D%E7%BD%AE/">vue-main.js的一些配置</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="mainjs"><strong>mainjs</strong></h3>
<p>在使用 vue-cli 2.0 时候，例如我们使用 elementUI，其官网已经给我们全局引入的例子，如下：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment"># main.js</span></span><br><span class="line"></span><br><span class="line">import Vue from <span class="string">&quot;vue&quot;</span>;</span><br><span class="line">import App from <span class="string">&quot;./App.vue&quot;</span>;</span><br><span class="line"></span><br><span class="line">import ElementUI from <span class="string">&#x27;element-ui&#x27;</span>;</span><br><span class="line">import <span class="string">&#x27;element-ui/lib/theme-chalk/index.css&#x27;</span>;</span><br><span class="line"></span><br><span class="line">Vue.use(ElementUI);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#  对于依赖包，如 echarts，软谋例子如下：</span></span><br><span class="line">import echarts from <span class="string">&#x27;echarts&#x27;</span>;</span><br><span class="line">Vue.prototype.<span class="variable">$echarts</span> = echarts;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># axios 软谋不是挂载到原型链上，而是如下使用：</span></span><br><span class="line">import axios from <span class="string">&#x27;axios&#x27;</span>;</span><br><span class="line">import vueaxios from <span class="string">&quot;vue-axios&quot;</span>;</span><br><span class="line">Vue.use(vueaxios, axios);</span><br><span class="line">this.axios.post();</span><br><span class="line"></span><br><span class="line"><span class="comment"># 当然你依然可以挂载到vue原型链上：</span></span><br><span class="line">import axios from <span class="string">&#x27;axios&#x27;</span>;</span><br><span class="line">Vue.prototype.<span class="variable">$axios</span> = axios;</span><br><span class="line">this.<span class="variable">$axios</span>.post();</span><br><span class="line"></span><br><span class="line"><span class="comment"># 因为已经挂载到Vue的原型链上了，则在vue文件中可如下使用：</span></span><br><span class="line">this.<span class="variable">$echarts</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 百度map</span></span><br><span class="line">import BaiduMap from <span class="string">&#x27;vue-baidu-map&#x27;</span>;</span><br><span class="line">Vue.use(BaiduMap, &#123;</span><br><span class="line">  ak: fkhahkfhakfhkahkfakj</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Cookie</span></span><br><span class="line">import vuecookie from <span class="string">&#x27;vue-cookie&#x27;</span></span><br><span class="line">Vue.use(vuecookie)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2020/12/26/vue-main-js%E7%9A%84%E4%B8%80%E4%BA%9B%E9%85%8D%E7%BD%AE/" data-id="cmcro5lmn004fqkk4dbocaway" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Vue/" rel="tag">Vue</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-代码文件之Eslint" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/12/25/%E4%BB%A3%E7%A0%81%E6%96%87%E4%BB%B6%E4%B9%8BEslint/" class="article-date">
  <time datetime="2020-12-25T03:16:40.000Z" itemprop="datePublished">2020-12-25</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/12/25/%E4%BB%A3%E7%A0%81%E6%96%87%E4%BB%B6%E4%B9%8BEslint/">代码片段之Eslint</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="解析器">解析器</h3>
<p>解析器有很多，但兼容eslint的解析器有以下几个：</p>
<ul>
<li>
<p>Espree：默认解析器，一个从Esprima中分离出来的解析器，做了一些优化</p>
</li>
<li>
<p>Esprima：js标准解析器</p>
</li>
<li>
<p>Babel-ESLint： 一个对Babel解析器的包装，babel本身也是js解析器的一种（不然怎么能转化为兼容性代码呢？首先需要进行js解析，才能转化）。如果我们的代码需要经过babel转化，则对应使用这个解析器</p>
</li>
<li>
<p>typescript-eslint-parser(实验) - 一个把 TypeScript 转换为 ESTree 兼容格式的解析器</p>
</li>
</ul>
<p><a target="_blank" rel="noopener" href="https://www.jianshu.com/p/7b77d6e107e2">链接</a></p>
<h3 id="extends-与-plugins">extends 与 plugins</h3>
<ul>
<li>
<p>个人理解：extends 里面的配置，就是一些人写好的插件，我们不用写了，就直接告诉 eslint 我继承这些规则即可，而 plugins 的场景就是：有些规则不满足你的需求，你想私人定制，于是自己写了插件，在此处配置后 eslint 就会解析你的插件！</p>
</li>
<li>
<p>可共享的配置可以省略包名的前缀 eslint-config-，即实际设置安装的包名是 eslint-config-pkgName</p>
</li>
<li>
<p>从插件中获取的规则，书写规则为 「plugin:插件包名/配置名」如：plugin:vue/essential 是简写，其在 node_modules 里的包名是 eslint-plugin-vue</p>
</li>
</ul>
<h3 id="eslintrc-js（v4-3-prettier）">.eslintrc.js（v4.3-prettier）</h3>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 下面配置中有 warn off，还有一种写法可以用数字代替 0 表示不处理不限制 1 进行警告 2 直接报错提示，可能程序就直接报错。</span></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="attr">root</span>: <span class="literal">true</span>,</span><br><span class="line">  <span class="attr">env</span>: &#123;</span><br><span class="line">    <span class="attr">node</span>: <span class="literal">true</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">extends</span>: [<span class="string">&quot;plugin:vue/essential&quot;</span>, <span class="string">&quot;eslint:recommended&quot;</span>, <span class="string">&quot;@vue/prettier&quot;</span>],</span><br><span class="line">  <span class="attr">parserOptions</span>: &#123;</span><br><span class="line">    <span class="attr">parser</span>: <span class="string">&quot;babel-eslint&quot;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">rules</span>: &#123;</span><br><span class="line">    <span class="string">&quot;no-console&quot;</span>: process.<span class="property">env</span>.<span class="property">NODE_ENV</span> === <span class="string">&quot;production&quot;</span> ? <span class="string">&quot;warn&quot;</span> : <span class="string">&quot;off&quot;</span>,</span><br><span class="line">    <span class="string">&quot;no-debugger&quot;</span>: process.<span class="property">env</span>.<span class="property">NODE_ENV</span> === <span class="string">&quot;production&quot;</span> ? <span class="string">&quot;warn&quot;</span> : <span class="string">&quot;off&quot;</span>,</span><br><span class="line">    <span class="string">&quot;comma-dangle&quot;</span>: [<span class="number">2</span>, <span class="string">&quot;never&quot;</span>], <span class="comment">// 对象字面量项尾不能有逗号</span></span><br><span class="line">    <span class="string">&quot;prettier/prettier&quot;</span>: <span class="string">&quot;off&quot;</span></span><br><span class="line">    <span class="comment">// &quot;prettier/prettier&quot;: [&quot;error&quot;, &#123;&quot;singleQuote&quot;: true, &quot;parser&quot;: &quot;flow&quot;&#125;]</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="eslintrc-js（iocr-frontend）">.eslintrc.js（iocr-frontend）</h3>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 下面写了 parserOptions 和 parser，是不是 ennbuilder 在构建时候也是 copy 的配置文件，这2个配置是否重复？还是不同版本导致的配置不同。</span></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="attr">env</span>: &#123;</span><br><span class="line">    <span class="attr">browser</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="attr">es6</span>: <span class="literal">true</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">extends</span>: <span class="string">&#x27;plugin:vue/essential&#x27;</span>,</span><br><span class="line">  <span class="attr">globals</span>: &#123;</span><br><span class="line">    <span class="title class_">Atomics</span>: <span class="string">&#x27;readonly&#x27;</span>,</span><br><span class="line">    <span class="title class_">SharedArrayBuffer</span>: <span class="string">&#x27;readonly&#x27;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">parser</span>: <span class="string">&#x27;vue-eslint-parser&#x27;</span>,</span><br><span class="line">  <span class="attr">parserOptions</span>: &#123;</span><br><span class="line">    <span class="attr">ecmaVersion</span>: <span class="number">2018</span>,</span><br><span class="line">    <span class="attr">sourceType</span>: <span class="string">&#x27;module&#x27;</span>,</span><br><span class="line">    <span class="attr">parser</span>: <span class="string">&#x27;babel-eslint&#x27;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">plugins</span>: [<span class="string">&#x27;vue&#x27;</span>],</span><br><span class="line">  <span class="attr">rules</span>: &#123;</span><br><span class="line">    <span class="string">&#x27;no-console&#x27;</span>: <span class="number">0</span>,</span><br><span class="line">    <span class="string">&#x27;no-alert&#x27;</span>: <span class="number">1</span>, <span class="comment">//提示alert</span></span><br><span class="line">    <span class="string">&#x27;no-var&#x27;</span>: <span class="number">2</span>, <span class="comment">//禁用var，用let和const代替</span></span><br><span class="line">    <span class="string">&#x27;no-constant-condition&#x27;</span>: <span class="number">2</span>, <span class="comment">//禁止在条件中使用常量表达式 if(true) if(1)</span></span><br><span class="line">    <span class="string">&#x27;no-empty&#x27;</span>: <span class="number">1</span>, <span class="comment">//块语句中的内容不能为空</span></span><br><span class="line">    <span class="string">&#x27;no-irregular-whitespace&#x27;</span>: <span class="number">2</span>, <span class="comment">//不能有不规则的空格</span></span><br><span class="line">    <span class="string">&#x27;no-multi-spaces&#x27;</span>: <span class="number">1</span>, <span class="comment">//不能用多余的空格</span></span><br><span class="line">    <span class="string">&#x27;no-redeclare&#x27;</span>: <span class="number">2</span>, <span class="comment">//禁止重复声明变量</span></span><br><span class="line">    <span class="attr">indent</span>: [</span><br><span class="line">      <span class="number">2</span>,</span><br><span class="line">      <span class="number">2</span>,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="title class_">SwitchCase</span>: <span class="number">1</span></span><br><span class="line">      &#125;</span><br><span class="line">    ], <span class="comment">// 使用缩进量为2</span></span><br><span class="line">    <span class="attr">semi</span>: [<span class="number">2</span>, <span class="string">&#x27;never&#x27;</span>], <span class="comment">// 不使用分号</span></span><br><span class="line">    <span class="attr">quotes</span>: [<span class="number">2</span>, <span class="string">&#x27;single&#x27;</span>] <span class="comment">// 使用单引号</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2020/12/25/%E4%BB%A3%E7%A0%81%E6%96%87%E4%BB%B6%E4%B9%8BEslint/" data-id="cmcro5lms004qqkk4bk6w1daa" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E4%BB%A3%E7%A0%81%E7%89%87%E6%AE%B5/" rel="tag">代码片段</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-代码片段之HTML" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/12/25/%E4%BB%A3%E7%A0%81%E7%89%87%E6%AE%B5%E4%B9%8BHTML/" class="article-date">
  <time datetime="2020-12-25T03:16:40.000Z" itemprop="datePublished">2020-12-25</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/12/25/%E4%BB%A3%E7%A0%81%E7%89%87%E6%AE%B5%E4%B9%8BHTML/">代码片段之HTML</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="link">link</h3>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">html</span></span><br><span class="line">&lt;link rel=&quot;icon&quot; href=&quot;data:;base64,=&quot; /&gt; // 次写法不报favicon.ico 404</span><br><span class="line">&lt;link rel=&quot;shortcut icon&quot; href=/favicon.ico&gt;</span><br><span class="line">&lt;link rel=&quot;shortcut icon&quot; href=/favicon.ico type=&quot;image/x-icon&quot;&gt;</span><br><span class="line">&lt;link rel=&quot;alternate icon&quot; class=&quot;js-site-favicon&quot; type=&quot;image/png&quot; href=&quot;https://github.githubassets.com/favicons/favicon.png&quot;&gt;</span><br><span class="line">&lt;link rel=&quot;icon&quot; class=&quot;js-site-favicon&quot; type=&quot;image/svg+xml&quot; href=&quot;https://github.githubassets.com/favicons/favicon.svg&quot;&gt;</span><br><span class="line"></span><br><span class="line">&lt;link rel=&quot;dns-prefetch&quot; href=&quot;https://github.githubassets.com&quot;&gt;</span><br></pre></td></tr></table></figure>
<h3 id="viewport">viewport</h3>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 视窗适配</span></span><br><span class="line">&lt;meta name=<span class="string">&quot;viewport&quot;</span> content=<span class="string">&quot;width=device-width,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no&quot;</span> /&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment"># google 新 tab 默认1</span></span><br><span class="line">&lt;meta name=<span class="string">&quot;viewport&quot;</span> content=<span class="string">&quot;initial-scale=1.0,user-scalable=no,maximum-scale=1,width=device-width,viewport-fit=cover&quot;</span> /&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment"># google 新 tab 默认2</span></span><br><span class="line">&lt;meta name=<span class="string">&quot;viewport&quot;</span> content=<span class="string">&quot;initial-scale=1.0,user-scalable=no,maximum-scale=1,viewport-fit=cover&quot;</span>     media=<span class="string">&quot;(device-height: 568px)&quot;</span> /&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2020/12/25/%E4%BB%A3%E7%A0%81%E7%89%87%E6%AE%B5%E4%B9%8BHTML/" data-id="cmcro5lmv004vqkk49ltla7yf" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E4%BB%A3%E7%A0%81%E7%89%87%E6%AE%B5/" rel="tag">代码片段</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-代码片段之Mixins" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/12/25/%E4%BB%A3%E7%A0%81%E7%89%87%E6%AE%B5%E4%B9%8BMixins/" class="article-date">
  <time datetime="2020-12-25T03:16:03.000Z" itemprop="datePublished">2020-12-25</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/12/25/%E4%BB%A3%E7%A0%81%E7%89%87%E6%AE%B5%E4%B9%8BMixins/">代码片段之Mixins</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="移动端-cell"><strong>移动端 cell</strong></h3>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># html</span></span><br><span class="line">&lt;div class=<span class="string">&quot;cell&quot;</span>&gt;</span><br><span class="line">  &lt;div class=<span class="string">&quot;item&quot;</span>&gt;</span><br><span class="line">    &lt;div class=<span class="string">&quot;input-wrap&quot;</span>&gt;</span><br><span class="line">      &lt;input</span><br><span class="line">        v-model=<span class="string">&quot;picCodeValue&quot;</span></span><br><span class="line">        <span class="built_in">type</span>=<span class="string">&quot;text&quot;</span></span><br><span class="line">        class=<span class="string">&quot;ipt&quot;</span></span><br><span class="line">        maxlength=<span class="string">&quot;4&quot;</span></span><br><span class="line">        placeholder=<span class="string">&quot;请输入图形验证码&quot;</span></span><br><span class="line">        @focus=<span class="string">&quot;onFocus&quot;</span></span><br><span class="line">        @blur=<span class="string">&quot;onBlur&quot;</span></span><br><span class="line">      /&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line"></span><br><span class="line">    &lt;div style=<span class="string">&quot;width: 10px; height: 40px&quot;</span>&gt;&lt;/div&gt;</span><br><span class="line"></span><br><span class="line">    &lt;div class=<span class="string">&quot;btn-wrap&quot;</span> @click=<span class="string">&quot;getPicCode&quot;</span>&gt;</span><br><span class="line">      &lt;div class=<span class="string">&quot;btn-pic-code&quot;</span>&gt;</span><br><span class="line">        &lt;div class=<span class="string">&quot;pic-code-img-wrap&quot;</span>&gt;</span><br><span class="line">          &lt;img</span><br><span class="line">            class=<span class="string">&quot;img&quot;</span></span><br><span class="line">            v-if=<span class="string">&quot;picCodeObj.captchaData&quot;</span></span><br><span class="line">            :src=<span class="string">&quot;picCodeObj.captchaData&quot;</span></span><br><span class="line">            alt=<span class="string">&quot;piccode&quot;</span></span><br><span class="line">          /&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line"></span><br><span class="line">        &lt;div class=<span class="string">&quot;pic-code-text-wrap&quot;</span>&gt;换一换&lt;/div&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment"># css</span></span><br><span class="line"></span><br><span class="line">.cell &#123;</span><br><span class="line">  padding: 0 30px;</span><br><span class="line">  margin-bottom: 10px;</span><br><span class="line"></span><br><span class="line">  .item &#123;</span><br><span class="line">    display: flex;</span><br><span class="line"></span><br><span class="line">    .input-wrap &#123;</span><br><span class="line">      flex: 1;</span><br><span class="line">      box-sizing: border-box;</span><br><span class="line">      .ipt &#123;</span><br><span class="line">        width: 100%;</span><br><span class="line">        box-sizing: border-box;</span><br><span class="line">        display: block;</span><br><span class="line">        line-height: 34px;</span><br><span class="line">        padding: 0 10px;</span><br><span class="line">        outline: none;</span><br><span class="line">        border: none;</span><br><span class="line">        font-size: 15px;</span><br><span class="line">        color: <span class="comment">#999;</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    .btn-wrap &#123;</span><br><span class="line">      flex: 1;</span><br><span class="line">      display: flex;</span><br><span class="line">      box-sizing: border-box;</span><br><span class="line"></span><br><span class="line">      .mybtn &#123;</span><br><span class="line">        display: flex;</span><br><span class="line">        width: 100%;</span><br><span class="line">        height: 100%;</span><br><span class="line">        padding: 0;</span><br><span class="line">        border: none;</span><br><span class="line">        outline: none;</span><br><span class="line">        justify-content: center;</span><br><span class="line">        align-items: center;</span><br><span class="line">        border-radius: 9px;</span><br><span class="line">        background-color: transparent;</span><br><span class="line">        font-size: inherit;</span><br><span class="line">        background-repeat: no-repeat;</span><br><span class="line">        background-size: 100% 100%;</span><br><span class="line">        background-position: center center;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2020/12/25/%E4%BB%A3%E7%A0%81%E7%89%87%E6%AE%B5%E4%B9%8BMixins/" data-id="cmcro5ln1004zqkk4ep436n0n" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E4%BB%A3%E7%A0%81%E7%89%87%E6%AE%B5/" rel="tag">代码片段</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-代码片段之JS" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/12/25/%E4%BB%A3%E7%A0%81%E7%89%87%E6%AE%B5%E4%B9%8BJS/" class="article-date">
  <time datetime="2020-12-25T03:10:40.000Z" itemprop="datePublished">2020-12-25</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/12/25/%E4%BB%A3%E7%A0%81%E7%89%87%E6%AE%B5%E4%B9%8BJS/">代码片段之JS</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="Array">Array</h3>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Array(9).fill(null)</span><br></pre></td></tr></table></figure>
<h3 id="Node">Node</h3>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">#!/usr/bin/env node // shebang</span><br></pre></td></tr></table></figure>
<h3 id="逻辑">逻辑</h3>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">Boolean &amp;&amp; <span class="string">&#x27;I am sure&#x27;</span> || <span class="string">&#x27;I am not sure&#x27;</span></span><br><span class="line"></span><br><span class="line">var obj = &#123;</span><br><span class="line">  method: <span class="string">&quot;PUT&quot;</span>,</span><br><span class="line">  body: JSON.stringify(&#123;</span><br><span class="line">    age: 1,</span><br><span class="line">  &#125;),</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">var rr = obj &amp;&amp; obj.body;</span><br><span class="line">console.log(rr) // <span class="string">&quot;&#123;&quot;</span>age<span class="string">&quot;:1&#125;&quot;</span></span><br></pre></td></tr></table></figure>
<h3 id="对象合并">对象合并</h3>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Object.assign(&#123;&#125;, obj, init);</span><br><span class="line">// 即使 init 是 undefined，则忽略 init 继续合并</span><br><span class="line">// &#123;method: &quot;PUT&quot;, body: &quot;&#123;&quot;age&quot;:1&#125;&quot;&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="iOS-input-失焦键盘不消失">iOS input 失焦键盘不消失</h3>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 看到网上有人这样的代码思路，首先是在mounted函数中对某输入框监听</span></span><br><span class="line"><span class="keyword">let</span> beforeIpt = <span class="literal">null</span>;</span><br><span class="line"><span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;inputId&quot;</span>).<span class="title function_">addEventListener</span>(<span class="string">&quot;focus&quot;</span>, <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">  beforeIpt = <span class="variable language_">this</span>;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(beforeIpt);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 在对文档进行监听，若是点击其他空白处，模拟失焦，则键盘自消失</span></span><br><span class="line"><span class="comment">// 使用tap事件可解决此问题</span></span><br><span class="line"><span class="comment">// document.addEventListener(&#x27;touchend&#x27;, function (e) &#123;</span></span><br><span class="line"><span class="comment">//   console.log(&#x27;touchend&#x27;);</span></span><br><span class="line"><span class="comment">//   if (e.target.nodeName.toLowerCase() != &#x27;input&#x27;) &#123;</span></span><br><span class="line"><span class="comment">//     if (beforeIpt) &#123;</span></span><br><span class="line"><span class="comment">//       beforeIpt.blur();</span></span><br><span class="line"><span class="comment">//       beforeIpt = null;</span></span><br><span class="line"><span class="comment">//     &#125;</span></span><br><span class="line"><span class="comment">//   &#125;</span></span><br><span class="line"><span class="comment">// &#125;);</span></span><br></pre></td></tr></table></figure>
<h3 id="移动端在注册或登录页面会出现键盘遮挡-input-输入框的解决办法">移动端在注册或登录页面会出现键盘遮挡 input 输入框的解决办法</h3>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> bfscrolltop = <span class="variable language_">document</span>.<span class="property">body</span>.<span class="property">scrollTop</span>; <span class="comment">//获取软键盘唤起前浏览器滚动部分的高度</span></span><br><span class="line"><span class="built_in">setTimeout</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">  <span class="comment">//设置一个计时器，时间设置与软键盘弹出所需时间相近</span></span><br><span class="line">  <span class="variable language_">document</span>.<span class="property">body</span>.<span class="property">scrollTop</span> = <span class="variable language_">document</span>.<span class="property">body</span>.<span class="property">scrollHeight</span>; <span class="comment">//获取焦点后将浏览器内所有内容高度赋给浏览器滚动部分高度</span></span><br><span class="line">&#125;, <span class="number">200</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;onFocus&quot;</span>);</span><br><span class="line"><span class="variable language_">document</span>.<span class="property">body</span>.<span class="property">scrollTop</span> = <span class="variable language_">document</span>.<span class="property">body</span>.<span class="property">scrollHeight</span>;</span><br><span class="line"><span class="variable language_">document</span>.<span class="property">documentElement</span>.<span class="property">scrollTop</span> = <span class="variable language_">document</span>.<span class="property">body</span>.<span class="property">scrollHeight</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> cnt = <span class="number">0</span>;</span><br><span class="line"><span class="variable language_">this</span>.<span class="property">timerId</span> = <span class="built_in">setInterval</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">if</span> (cnt &lt; <span class="number">5</span>) &#123;</span><br><span class="line">    cnt++;</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="built_in">clearInterval</span>(<span class="variable language_">this</span>.<span class="property">timerId</span>);</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">timerId</span> = <span class="literal">null</span>;</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="variable language_">document</span>.<span class="property">body</span>.<span class="property">scrollTop</span> = <span class="variable language_">document</span>.<span class="property">body</span>.<span class="property">scrollHeight</span>;</span><br><span class="line">  <span class="variable language_">document</span>.<span class="property">documentElement</span>.<span class="property">scrollTop</span> = <span class="variable language_">document</span>.<span class="property">body</span>.<span class="property">scrollHeight</span>;</span><br><span class="line">&#125;, <span class="number">200</span>);</span><br></pre></td></tr></table></figure>
<h3 id="获取-dom-信息">获取 dom 信息</h3>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">getDom</span> = (<span class="params">selector, type = <span class="string">&quot;id&quot;</span></span>) =&gt;</span><br><span class="line">  type === <span class="string">&quot;id&quot;</span></span><br><span class="line">    ? <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(selector)</span><br><span class="line">    : <span class="variable language_">document</span>.<span class="title function_">getElementsByClassName</span>(selector)[<span class="number">0</span>];</span><br></pre></td></tr></table></figure>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;app&quot;</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span>Hi<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">getDom</span>(<span class="string">&quot;app&quot;</span>, <span class="string">&quot;class&quot;</span>).<span class="property">innerHTML</span>); <span class="comment">// Hi</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">getDom</span>(<span class="string">&quot;app&quot;</span>).<span class="property">innerHTML</span>); <span class="comment">// Hi</span></span><br></pre></td></tr></table></figure>
<h3 id="下载表格">下载表格</h3>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">onDownload</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">let</span> hostname = <span class="variable language_">window</span>.<span class="property">location</span>.<span class="property">origin</span></span><br><span class="line">  <span class="keyword">let</span> request_no = <span class="variable language_">this</span>.<span class="property">formItem</span>.<span class="property">orderNumber</span></span><br><span class="line">  <span class="keyword">let</span> channel_name = <span class="variable language_">this</span>.<span class="property">formItem</span>.<span class="property">salesStaff</span></span><br><span class="line">  <span class="keyword">let</span> begin_time = <span class="variable language_">this</span>.<span class="property">formItem</span>.<span class="property">beginTimeTemp</span></span><br><span class="line">  <span class="keyword">let</span> finish_time = <span class="variable language_">this</span>.<span class="property">formItem</span>.<span class="property">endTimeTemp</span></span><br><span class="line">  <span class="keyword">let</span> current_page = <span class="variable language_">this</span>.<span class="property">pagination</span>.<span class="property">pageIndex</span></span><br><span class="line">  <span class="keyword">let</span> limit = <span class="variable language_">this</span>.<span class="property">pagination</span>.<span class="property">limit</span></span><br><span class="line">  <span class="keyword">let</span> downURL = <span class="string">`<span class="subst">$&#123;hostname&#125;</span>/store/Financing/firstOrder?request_no=<span class="subst">$&#123;request_no&#125;</span>&amp;channel_name=<span class="subst">$&#123;channel_name&#125;</span>&amp;begin_time=<span class="subst">$&#123;begin_time&#125;</span>&amp;finish_time=<span class="subst">$&#123;finish_time&#125;</span>&amp;current_page=<span class="subst">$&#123;current_page&#125;</span>&amp;limit=<span class="subst">$&#123;limit&#125;</span>`</span></span><br><span class="line">  <span class="variable language_">window</span>.<span class="property">location</span>.<span class="property">href</span> = downURL</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 页面中创建 a 标签并跳转</span></span><br><span class="line"><span class="title function_">createLabel</span>(<span class="params"></span>)&#123;</span><br><span class="line">  <span class="keyword">const</span> link = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&#x27;a&#x27;</span>) <span class="comment">// 创建a标签</span></span><br><span class="line">  link.<span class="property">style</span>.<span class="property">display</span> = <span class="string">&#x27;none&#x27;</span> <span class="comment">// 使其隐藏</span></span><br><span class="line">  link.<span class="property">href</span> = url <span class="comment">// 赋予a标签地址</span></span><br><span class="line">  link.<span class="title function_">setAttribute</span>(<span class="string">&#x27;target&#x27;</span>, <span class="string">&#x27;_blank&#x27;</span>)</span><br><span class="line">  link.<span class="title function_">setAttribute</span>(<span class="string">&#x27;rel&#x27;</span>, <span class="string">&#x27;noopener noreferrer&#x27;</span>)</span><br><span class="line">  <span class="variable language_">document</span>.<span class="property">body</span>.<span class="title function_">appendChild</span>(link) <span class="comment">// a标签插至页面中</span></span><br><span class="line">  link.<span class="title function_">click</span>() <span class="comment">// 强制触发a标签事件</span></span><br><span class="line">  <span class="variable language_">document</span>.<span class="property">body</span>.<span class="title function_">removeChild</span>(link)</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="forEach">forEach</h3>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 操作数组里面item的数据</span></span><br><span class="line"><span class="comment">// 例子1</span></span><br><span class="line">that.<span class="property">dataSource</span>.<span class="title function_">forEach</span>(<span class="function">(<span class="params">element</span>) =&gt;</span> &#123;</span><br><span class="line">  element.<span class="property">shareToolName</span> = element.<span class="property">shareToolName</span>.<span class="title function_">split</span>(<span class="string">&quot;,&quot;</span>).<span class="title function_">join</span>(<span class="string">&quot;，&quot;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 例子2</span></span><br><span class="line"><span class="variable language_">this</span>.<span class="property">recordList</span>.<span class="title function_">forEach</span>(<span class="function">(<span class="params">item</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">if</span> (!!item.<span class="property">fileAddressList</span>) &#123;</span><br><span class="line">    item.<span class="property">fileAddressList</span> = item.<span class="property">fileAddressList</span>.<span class="title function_">map</span>(<span class="function">(<span class="params">m</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="comment">// return &#123; fileName: m.fileName, url: `$&#123;window._env_.gatewayUrl&#125;/$&#123;window._env_.APP_ID&#125;/file/get/$&#123;m.fileAddressOrId&#125;` &#125;</span></span><br><span class="line">      <span class="keyword">return</span> &#123; <span class="attr">fileName</span>: m.<span class="property">fileName</span>, <span class="attr">url</span>: m.<span class="property">fileAddressOrId</span> &#125;;</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<h3 id="原生-xhr-请求">原生 xhr 请求</h3>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">downloadLoad</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> xhr = <span class="keyword">new</span> <span class="title class_">XMLHttpRequest</span>()</span><br><span class="line">  xhr.<span class="title function_">open</span>(<span class="string">&#x27;GET&#x27;</span>, <span class="string">`<span class="subst">$&#123;<span class="variable language_">window</span>._env_.gatewayUrl&#125;</span>/<span class="subst">$&#123;<span class="variable language_">window</span>._env_.APP_ID&#125;</span>/reviewRecord/GenerateAllPlan?recordId=<span class="subst">$&#123;<span class="variable language_">this</span>.incentiveSchemesId&#125;</span>`</span>, <span class="literal">true</span>)</span><br><span class="line">  xhr.<span class="title function_">setRequestHeader</span>(<span class="string">&#x27;X-GW-AccessKey&#x27;</span>, <span class="variable language_">window</span>.<span class="property">_env_</span>.<span class="property">accessKey</span>)</span><br><span class="line"></span><br><span class="line">  <span class="keyword">let</span> loadingInstance = <span class="variable language_">this</span>.$loading(&#123; <span class="attr">text</span>: <span class="string">&#x27;下载中...&#x27;</span> &#125;)</span><br><span class="line">  <span class="comment">// xhr.responseType = &#x27;blob&#x27;</span></span><br><span class="line">  xhr.<span class="property">onload</span> = <span class="function"><span class="params">ev</span> =&gt;</span> &#123;</span><br><span class="line">    loadingInstance.<span class="title function_">close</span>()</span><br><span class="line">    <span class="keyword">if</span> (xhr.<span class="property">status</span> == <span class="number">200</span>) &#123;</span><br><span class="line">      <span class="keyword">let</span> response = xhr.<span class="property">response</span></span><br><span class="line">      response = <span class="title class_">JSON</span>.<span class="title function_">parse</span>(response)</span><br><span class="line">      <span class="keyword">if</span> (response.<span class="property">success</span>) &#123;</span><br><span class="line">        <span class="keyword">const</span> fname = response.<span class="property">data</span>.<span class="title function_">split</span>(<span class="string">&#x27;/icome-partner-server/&#x27;</span>)[<span class="number">1</span>]</span><br><span class="line">        <span class="variable language_">this</span>.<span class="title function_">handleDownload</span>(response.<span class="property">data</span>, fname)</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      <span class="comment">// const contentDisposition = xhr.getResponseHeader(&#x27;content-disposition&#x27;)</span></span><br><span class="line">      <span class="comment">// const blob = new Blob([response], &#123; type: &#x27;application/zip&#x27; &#125;)</span></span><br><span class="line">      <span class="comment">// const fname = contentDisposition.split(&#x27;filename=&#x27;)[1].split(&#x27;.&#x27;)[0]</span></span><br><span class="line">      <span class="comment">// const el = document.createElement(&#x27;a&#x27;)</span></span><br><span class="line">      <span class="comment">// const href = window.URL.createObjectURL(blob)</span></span><br><span class="line">      <span class="comment">// el.href = href</span></span><br><span class="line">      <span class="comment">// el.download = decodeURIComponent(fname)</span></span><br><span class="line">      <span class="comment">// document.body.appendChild(el)</span></span><br><span class="line">      <span class="comment">// el.click()</span></span><br><span class="line">      <span class="comment">// document.body.removeChild(el)</span></span><br><span class="line">      <span class="comment">// window.URL.revokeObjectURL(href)</span></span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (xhr.<span class="property">status</span> == <span class="number">201</span>) &#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">$message</span>.<span class="title function_">error</span>(<span class="string">&#x27;请先保存之后下载附件&#x27;</span>)</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (xhr.<span class="property">status</span> == <span class="number">401</span>) &#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">$message</span>.<span class="title function_">error</span>(<span class="string">&#x27;暂无权限&#x27;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  xhr.<span class="title function_">send</span>()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="判断是否为-PC-环境">判断是否为 PC 环境</h3>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">isPC</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> userAgentInfo = navigator.<span class="property">userAgent</span></span><br><span class="line">  <span class="keyword">const</span> <span class="title class_">Agents</span> = [</span><br><span class="line">    <span class="string">&#x27;Android&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;iPhone&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;SymbianOS&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;Windows Phone&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;iPad&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;iPod&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;BlackBerry&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;webOS&#x27;</span>,</span><br><span class="line">  ]</span><br><span class="line">  <span class="keyword">let</span> flagPc = <span class="literal">true</span></span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; <span class="title class_">Agents</span>.<span class="property">length</span>; i++) &#123;</span><br><span class="line">    <span class="keyword">if</span> (userAgentInfo.<span class="title function_">indexOf</span>(<span class="title class_">Agents</span>[i]) &gt; <span class="number">0</span>) &#123;</span><br><span class="line">      flagPc = <span class="literal">false</span></span><br><span class="line">      <span class="keyword">break</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> flagPc</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 是 pc 则 todo</span></span><br><span class="line"><span class="keyword">if</span> (<span class="title function_">isPC</span>()) &#123;</span><br><span class="line">  todo</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">  other todo</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2020/12/25/%E4%BB%A3%E7%A0%81%E7%89%87%E6%AE%B5%E4%B9%8BJS/" data-id="cmcro5lmz004wqkk4638h9amn" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E4%BB%A3%E7%A0%81%E7%89%87%E6%AE%B5/" rel="tag">代码片段</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-CSS杂记" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/12/25/CSS%E6%9D%82%E8%AE%B0/" class="article-date">
  <time datetime="2020-12-25T02:48:46.000Z" itemprop="datePublished">2020-12-25</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/12/25/CSS%E6%9D%82%E8%AE%B0/">CSS杂记</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="背景色">背景色</h3>
<ul>
<li>默认 body 背景色为 <code>#fff</code></li>
</ul>
<h3 id="Margin">Margin</h3>
<ul>
<li>默认 body 元素 <code>margin: 8px;</code></li>
</ul>
<h3 id="Padding">Padding</h3>
<ul>
<li>暂无</li>
</ul>
<h3 id="杂项">杂项</h3>
<ul>
<li>在写 e 家农场登录页时，发现一个 cell 下，两个儿子元素设置了<code>flex: 1</code>，却宽度不等！可在儿子元素下包裹一个 div.wrap 即可！</li>
</ul>
<h3 id="移动端视窗（针对个人手机）">移动端视窗（针对个人手机）</h3>
<ul>
<li>
<p>iPhone8 Plus 414 * 736</p>
</li>
<li>
<p>微信 app title 高度 44，电池栏 20，和是 64，则余下的高度 = (736 - 64 = 672)，JS 获取 innerHeight = 623，则推理出其 tabbar 为 672 - 623 = 49;</p>
</li>
<li>
<p>移动端 Safria app 视窗，JS 获取 innerHeight = 622，则推理出其 tabbar 为 672 - 622 = 50;</p>
</li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2020/12/25/CSS%E6%9D%82%E8%AE%B0/" data-id="cmcro5lkf000bqkk4bnkpgwt8" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/CSS%E7%9B%B8%E5%85%B3/" rel="tag">CSS相关</a></li></ul>

    </footer>
  </div>
  
</article>


  


  <nav id="page-nav">
    <!-- &laquo; -->
    <!-- &raquo; -->
    
    <a class="extend prev" rel="prev" href="/page/3/">Prev</a><a class="page-number" href="/">1</a><a class="page-number" href="/page/2/">2</a><a class="page-number" href="/page/3/">3</a><span class="page-number current">4</span><a class="page-number" href="/page/5/">5</a><a class="page-number" href="/page/6/">6</a><span class="space">&hellip;</span><a class="page-number" href="/page/11/">11</a><a class="extend next" rel="next" href="/page/5/">Next</a>
  </nav>

</section>
        
          <aside id="sidebar">
  
    

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/CSS%E7%9B%B8%E5%85%B3/" rel="tag">CSS相关</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Form%E8%A1%A8%E5%8D%95%E7%9B%B8%E5%85%B3/" rel="tag">Form表单相关</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Git%E7%9B%B8%E5%85%B3/" rel="tag">Git相关</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/IDE/" rel="tag">IDE</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/IT-%E5%B7%A5%E5%85%B7-%E6%95%B0%E7%A0%81/" rel="tag">IT-工具-数码</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/JS%E7%9B%B8%E5%85%B3/" rel="tag">JS相关</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Linux/" rel="tag">Linux</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Node-js/" rel="tag">Node.js</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/PHP/" rel="tag">PHP</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/React/" rel="tag">React</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Server/" rel="tag">Server</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Table%E7%9B%B8%E5%85%B3/" rel="tag">Table相关</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Vue/" rel="tag">Vue</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Web%E6%9D%82%E9%9B%86/" rel="tag">Web杂集</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/layui%E7%9B%B8%E5%85%B3/" rel="tag">layui相关</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E4%BB%A3%E7%A0%81%E7%89%87%E6%AE%B5/" rel="tag">代码片段</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%89%8D%E7%AB%AF%E7%B2%BE%E8%BF%9B/" rel="tag">前端精进</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%AE%9D%E5%A1%94/" rel="tag">宝塔</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%B0%8F%E7%A8%8B%E5%BA%8F/" rel="tag">小程序</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E9%9D%A2%E8%AF%95/" rel="tag">面试</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2025/05/">May 2025</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2025/04/">April 2025</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2025/03/">March 2025</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2025/02/">February 2025</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2024/12/">December 2024</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/03/">March 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/01/">January 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/09/">September 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/05/">May 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/03/">March 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/02/">February 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/01/">January 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/12/">December 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/11/">November 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/10/">October 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/08/">August 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/07/">July 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/06/">June 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/04/">April 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/03/">March 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/12/">December 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/11/">November 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/09/">September 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/07/">July 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/06/">June 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/05/">May 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/04/">April 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/03/">March 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/02/">February 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/01/">January 2019</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2025/05/05/CSS%E4%B9%8Bflex/">CSS之flex</a>
          </li>
        
          <li>
            <a href="/2025/04/14/prettier%E4%BB%8B%E7%BB%8D/">prettier介绍</a>
          </li>
        
          <li>
            <a href="/2025/04/14/vite%E4%BB%8B%E7%BB%8D/">vite介绍</a>
          </li>
        
          <li>
            <a href="/2025/03/23/js%E5%8E%9F%E7%94%9F%E6%B7%BB%E5%8A%A0class/">js原生添加class</a>
          </li>
        
          <li>
            <a href="/2025/03/13/%E9%9D%A2%E8%AF%95%E4%B9%8B%E4%BB%A3%E7%A0%81%E6%89%A7%E8%A1%8C%E7%89%87%E6%AE%B5/">面试之代码执行片段</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2025 Andy Zhang<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
    <a href="/tags" class="mobile-nav-link">Tags</a>
  
    <a href="/about" class="mobile-nav-link">About</a>
  
</nav>
    

<script src="//apps.bdimg.com/libs/jquery/2.1.4/jquery.min.js"></script>


  
<link rel="stylesheet" href="/fancybox/jquery.fancybox.css">

  
<script src="/fancybox/jquery.fancybox.pack.js"></script>




<script src="/js/script.js"></script>




  </div>
</body>
</html>